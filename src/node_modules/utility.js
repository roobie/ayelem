const assert = require('assert')

module.exports = {
  className: function className (hash) {
    const result = []
    for (let k in hash) {
      if (hash[k]) {
        result.push(k)
      }
    }
    return result.join(' ')
  },

  linearStateMachine: function linearStateMachine (def, current = 0) {
    assert(def.states, 'argument[0]{states} must be defined as an array of at least one element')
    assert(current >= 0, 'argument[1]current must be zero or greater')
    assert(current < def.states.length, 'argument[1]current must be less than the length of the array of defined states')

    return {
      current: () => def.states[current],
      step: () => linearStateMachine(def, current < (def.states.length - 1) ? current + 1 : 0)
    }
  }
}
